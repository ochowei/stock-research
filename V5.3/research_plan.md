é€™æ˜¯ä¸€ä»½åŒ…å« **å¤§ç›¤ Buy & Hold åŸºæº–** çš„å®Œæ•´æ›´æ–°ç‰ˆ **V5.3 ç ”ç©¶è¨ˆç•« (Final Revised v7)**ã€‚

åŠ å…¥å¤§ç›¤åŸºæº–ï¼ˆå¦‚ SPY Buy & Holdï¼‰å°æ–¼é©—è­‰ç­–ç•¥æ˜¯å¦å…·æœ‰ **Alphaï¼ˆè¶…é¡å ±é…¬ï¼‰** è‡³é—œé‡è¦ï¼Œå¦å‰‡æˆ‘å€‘ç„¡æ³•ç¢ºå®šç­–ç•¥ç²åˆ©æ˜¯å¦åƒ…åƒ…æ˜¯å› ç‚ºå¸‚å ´æœ¬èº«åœ¨ä¸Šæ¼²ï¼ˆBetaï¼‰ã€‚

---

# **ç ”ç©¶è¨ˆç•«ï¼šV5.3-Dynamic (Track A) æ•¸æ“šæª¢æ ¸èˆ‡å‹•æ…‹æ”»é˜²ç³»çµ± (Final Revised v7)**

**Date:** 2025-12-04
**Focus:** ğŸŸ¢ **Free Data Only (yfinance)**
**Constraint:** ğŸ‡¹ğŸ‡¼ **Taiwan Timezone (T-1 Decision / T Open Execution)**
**Goal:** åœ¨å…è²»æ•¸æ“šèˆ‡å¯¦ç›¤é™åˆ¶ä¸‹ï¼Œé©—è­‰å‹•æ…‹é¢¨æ§çš„æœ‰æ•ˆæ€§ï¼Œä¸¦ç‚º V5.4 çš„å…¨çœŸå›æ¸¬å¥ å®šåŸºç¤ã€‚

---

## **éšæ®µä¸€ï¼šæ•¸æ“šå¯©è¨ˆèˆ‡åŸºæº–é‡ç¾ (Data Audit & Baselining)**

**ç›®æ¨™ï¼š** åœ¨é–‹ç™¼æ–°åŠŸèƒ½å‰ï¼Œå…ˆç¢ºä¿æ•¸æ“šå“è³ªï¼Œä¸¦å»ºç«‹æ¸…æ´—å¾Œçš„æ¨™æº–æ¸¬è©¦é›†ï¼Œé‡åŒ–ã€Œç¯©é¸åå·®ã€çš„å½±éŸ¿ã€‚

### **1.1 å·¥ä½œé …ç›®ï¼šæ•¸æ“šè¦†è“‹ç‡åˆ†æèˆ‡æ¸…æ´— (Data Sufficiency Analysis & Cleaning)**
* **å•é¡Œï¼š** ç¹¼æ‰¿è‡ª V5.2 çš„æ¸…å–®æ˜¯éœæ…‹çš„ï¼Œå¯èƒ½åŒ…å«åœ¨æ—©æœŸå¹´ä»½ï¼ˆå¦‚ 2015-2018ï¼‰å°šæœªä¸Šå¸‚æˆ–æµå‹•æ€§ä¸è¶³çš„æ¨™çš„ã€‚
* **åŸ·è¡Œå‹•ä½œ (æ’°å¯« `00_audit_data.py`):**
    1.  **å‚™ä»½åŸå§‹æ¸…å–®ï¼š** å°‡ V5.2 çš„åŸå§‹æª”æ¡ˆé‡æ–°å‘½åç‚º `origin_asset_pool.json` èˆ‡ `origin_toxic_asset_pool.json`ã€‚
    2.  **æ•¸æ“šå¯©è¨ˆï¼š** è®€å– `universe_daily.parquet`ï¼Œè¨ˆç®—æ¯æª”æ¨™çš„åœ¨ 2015-2025 é–“çš„ã€Œæœ‰æ•ˆäº¤æ˜“æ—¥ã€æ¯”ä¾‹èˆ‡æˆäº¤é‡å¯†åº¦ã€‚
    3.  **æ¸…æ´—èˆ‡ç”Ÿæˆï¼š** æ ¹æ“šå¯©è¨ˆçµæœï¼ˆä¾‹å¦‚ï¼šå‰”é™¤ IPO éæ™šæˆ–æ•¸æ“šç¼ºå¤±éå¤šçš„æ¨™çš„ï¼‰ï¼Œç”Ÿæˆç¶“éæ¸…æ´—çš„ **æ–°ç‰ˆ** `asset_pool.json` èˆ‡ `toxic_asset_pool.json`ã€‚
    4.  **ç”¢å‡ºå ±å‘Šï¼š** ç”Ÿæˆ `data_selection_report.md`ï¼Œè©³ç´°æè¿°ç¯©é¸é‚è¼¯ã€è¢«å‰”é™¤çš„æ¨™çš„åŠå…¶åŸå› ã€‚
    5.  **è¦†è“‹ç‡è¦–è¦ºåŒ–ï¼š** ç”¢å‡º `data_coverage_over_time.png`ï¼Œç¢ºèªæ¸…æ´—å¾Œå„å¹´ä»½çš„æœ‰æ•ˆæ¨™çš„æ•¸é‡ï¼ˆç›®æ¨™ > 30 æª”ï¼‰ã€‚

### **1.2 å·¥ä½œé …ç›®ï¼šåŸºæº–ç·šé‡ç¾ (Benchmark Re-implementation)**
* **ç›®æ¨™ï¼š** ä½¿ç”¨ **æ¸…æ´—å¾Œçš„æ–°ç‰ˆæ¸…å–®** è·‘å‡º V5.1ã€V5.2 èˆ‡å¤§ç›¤çš„æˆç¸¾å–®ä½œç‚ºå°ç…§ã€‚
* **åŸ·è¡Œå‹•ä½œ (æ’°å¯« `05_backtest_benchmarks.py`):**
    * **Benchmark A (V5.1 Aggressive):** é‚è¼¯: `Fixed 5-Day` + `No Filter` + `Equal Weight`ã€‚
    * **Benchmark B (V5.2 Risk-Aware):** é‚è¼¯: `Fixed 5-Day` + `Breadth Filter` + `ATR Sizing` (å³ V5.2 Full System)ã€‚
    * **Benchmark C (Market Baseline):** é‚è¼¯: **Buy & Hold (SPY)**ã€‚ä½œç‚ºè©•ä¼°ç­–ç•¥æ˜¯å¦å…·å‚™çœŸå¯¦ Alpha çš„çµ•å°åŸºæº–ã€‚
    * **ç”¢å‡º:** `analysis/baseline_performance.csv`ã€‚

---

## **éšæ®µäºŒï¼šæ ¸å¿ƒç³»çµ±å¯¦ä½œ (Core Implementation - Track A)**

*(æ­¤éšæ®µæ‰€æœ‰æ•¸æ“šçš†ä¾†è‡ª yfinance OHLCVï¼Œç„¡éœ€ä»˜è²»)*

### **2.1 å¯¦ç›¤æ“ä½œé™åˆ¶ (Operational Constraints)**
* **æƒ…å¢ƒ:** æ“ä½œè€…ä½æ–¼å°ç£ï¼Œç„¡æ³•åœ¨ç¾è‚¡ç›¤ä¸­ç›¯ç›¤ã€‚
* **æµç¨‹:**
    1.  **T-1 æ”¶ç›¤å¾Œ:** ä¸‹è¼‰æ•¸æ“šï¼Œè¨ˆç®—è¨Šè™Ÿã€‚
    2.  **T æ—¥é–‹ç›¤å‰:** é æ›è¨‚å–®ã€‚
* **äº¤æ˜“åŸ·è¡Œ (Execution):**
    * **é€²å ´:** T æ—¥é–‹ç›¤å¸‚åƒ¹å–® (Market on Open)ã€‚
    * **å‡ºå ´:** T æ—¥é–‹ç›¤å‰æ›å‡º **åœæå¸‚åƒ¹å–® (Stop Market Order)**ï¼Œè§¸ç™¼åƒ¹åŸºæ–¼ T-1 æ•¸æ“šå›ºå®šï¼ˆç›¤ä¸­ä¸ç§»å‹•ï¼‰ã€‚

### **2.2 L4 å‡ºå ´å±¤ï¼šéš”æ—¥æ›´æ–°å‹•æ…‹æ­¢ç›ˆ (Daily-Updated Trailing Stop)**
* **æ©Ÿåˆ¶:** å–ä»£ V5.2 çš„å›ºå®š 5 å¤©å‡ºå ´ã€‚
* **é‚è¼¯:**
    * æ­¢æåƒ¹ ($Stop\_Price_T$) å¿…é ˆåœ¨ `T` æ—¥é–‹ç›¤å‰æ±ºå®šã€‚
    * $Stop\_Price_T = Highest\_High_{(Entry \to T-1)} - (K \times ATR_{T-1})$
* **å‹•æ…‹ K å€¼:**
    * **é è¨­:** $K=3.0$ (è®“åˆ©æ½¤å¥”è·‘)ã€‚
    * **ç·Šç¸®:** ç•¶ `RSI(T-1) > 70` æˆ– `L1_Risk(T-1) = High` æ™‚ï¼Œç·Šç¸®è‡³ $K=1.5$ (å¿«é€Ÿé–åˆ©)ã€‚

### **2.3 äº¤æ˜“æˆæœ¬æ¨¡å‹ (Transaction Cost Model)**
* **åˆ¸å•†å‡è¨­:** **Firstrade / IBKR Lite (Zero Commission)**ã€‚
* **åƒæ•¸è¨­å®š:**
    * **Commission (ä½£é‡‘):** **0 bps**ã€‚
    * **Regulatory Fees (è¦è²»):** **1 bps** (é ç•™çµ¦ SEC/TAF è³£å‡ºè¦è²»)ã€‚
    * **Slippage (æ»‘åƒ¹):**
        * **Entry (Market on Open):** **5 bps** (é–‹ç›¤å¸‚åƒ¹å–®æ»‘åƒ¹)ã€‚
        * **Trailing Exit (Stop Market):** **10 bps** (æ¨¡æ“¬è§¸ç™¼æ­¢ææ™‚ï¼Œå¸‚åƒ¹å–®é€ æˆçš„è¼ƒå¤§æ»‘åƒ¹)ã€‚

### **2.4 L1 é˜²ç¦¦å±¤ï¼šæ··åˆå¼å´©ç›¤é è­¦ (Hybrid Defense)**
* **A. ç¡¬æ€§ç†”æ–·:** `Breadth(T-1) < 15%` -> å¼·åˆ¶ `T_Open` æ¸…å€‰ã€‚
* **B. é æ¸¬æ¨¡çµ„ (Price Action XGBoost):**
    * åˆ©ç”¨ VIX æ–œç‡èˆ‡å¯¬åº¦æŒ‡æ¨™é æ¸¬çŸ­æœŸæ³¢å‹•ã€‚
    * **Action:** åƒ…èª¿æ•´ L4 åƒæ•¸ï¼ˆç·Šç¸® K å€¼ï¼‰ï¼Œä¸å¼·åˆ¶æ¸…å€‰ï¼ˆé™¤éè§¸ç™¼ç¡¬æ€§ç†”æ–·ï¼‰ã€‚

---

## **éšæ®µä¸‰ï¼šé©—è­‰èˆ‡å£“åŠ›æ¸¬è©¦ (Verification)**

### **3.1 å‰é›¢ç ”ç©¶ (Ablation Study)**
åœ¨åŒä¸€ä»½æ•¸æ“šæ±  (æ¸…æ´—å¾Œçš„ Normal + Toxic) ä¸Šï¼Œæ¯”è¼ƒä»¥ä¸‹å ´æ™¯ï¼š

1.  **V5.3 (Full):** L1 æ··åˆé˜²ç¦¦ + L4 å‹•æ…‹å‡ºå ´ (éš”æ—¥æ›´æ–°)ã€‚
2.  **V5.3 (No L1):** åƒ… L4 å‹•æ…‹å‡ºå ´ (æ¸¬è©¦ L4 è‡ªèº«çš„ç²åˆ©èƒ½åŠ›)ã€‚
3.  **V5.3 (No Stop / æ­»æŠ±):** **(é—œéµå°ç…§)** é—œé–‰ L4 èˆ‡æ™‚é–“æ­¢æï¼ŒæŒæœ‰ç›´åˆ°è§¸ç™¼ L1 ç†”æ–·æˆ– RSI > 90 æ¥µç«¯è¨Šè™Ÿã€‚
    * *ç›®çš„:* é©—è­‰åœ¨ã€Œç„¡æ³•ç›¤ä¸­ç§»å‹•æ­¢æã€çš„åŠ£å‹¢ä¸‹ï¼ŒL4 æ˜¯å¦ä»å„ªæ–¼æ­»æŠ±ã€‚å¦‚æœæ­»æŠ±ç¸¾æ•ˆæ›´å¥½ï¼Œä»£è¡¨ L4 è¢«æ´—å‡ºå ´çš„é »ç‡éé«˜ã€‚
4.  **V5.2 (Benchmark):** å›ºå®š 5 å¤© + ç¡¬æ€§ç†”æ–· (æ¸¬è©¦ V5.3 æ˜¯å¦è¶…è¶Šå‰ä»£)ã€‚

### **3.2 æ¯’æ€§ç”Ÿå­˜æ¸¬è©¦ (Survivorship Stress Test)**
* å°ˆæ³¨è§€å¯Ÿ **æ¸…æ´—å¾Œæ–°ç‰ˆ** `toxic_asset_pool.json` ä¸­çš„æ¨™çš„ã€‚
* **æˆåŠŸæ¨™æº–:** V5.3 åœ¨æ¯’æ€§æ± ä¸­çš„ MaxDD éœ€å„ªæ–¼ V5.2ï¼Œä¸”ç¸½å›å ±ä¸æ‡‰æ­¸é›¶ã€‚

---

## **åŸ·è¡Œé †åº (Execution Steps)**

1.  **[Step 0] æ•¸æ“šæ¸…æ´—:** åŸ·è¡Œ `00_download_custom.py` -> `00_audit_data.py` (ç”¢å‡ºæ–°æ¸…å–®èˆ‡å ±å‘Š)ã€‚
2.  **[Step 1] å»ºç«‹åŸºæº–:** åŸ·è¡Œ `05_backtest_benchmarks.py` (V5.1/V5.2/SPY)ã€‚
3.  **[Step 2] é–‹ç™¼ V5.3:** ä¿®æ”¹ `risk_manager.py` (L4/L1) èˆ‡ `backtesting_utils.py` (å¯¦ä½œ T-1/T Open é‚è¼¯èˆ‡æ–°æˆæœ¬æ¨¡å‹)ã€‚
4.  **[Step 3] æœ€çµ‚å›æ¸¬:** åŸ·è¡Œ `06_backtest_v5.3.py` (å«æ‰€æœ‰å‰é›¢å ´æ™¯)ã€‚

---

## **æœªä¾†å±•æœ› (Future Work): V5.4 Track B é€²éšçœŸå¯¦æ€§ç ”ç©¶**

**ç›®æ¨™:** å¾ V5.3 çš„ã€Œå·²çŸ¥æ¯’æ€§æ¨¡æ“¬ã€é€²éšåˆ°ã€ŒæœªçŸ¥æ¯’æ€§æ¢ç´¢ã€ï¼Œè§£æ±º yfinance æ•¸æ“šçš„å…ˆå¤©ç¼ºé™·ã€‚

### **1. æ›´ç´°é¡†ç²’åº¦çš„ OHLCV (High-Frequency Data)**
* **æ•¸æ“šéœ€æ±‚:** 5m æˆ– 15m Kç·šæ•¸æ“š (éœ€ä»˜è²»æˆ–é€é IBKR API ç²å–)ã€‚
* **æ‡‰ç”¨å ´æ™¯:**
    * **ç›¤ä¸­è·¯å¾‘æ¨¡æ“¬:** V5.3 å‡è¨­ `Low < Stop_Price` å³è§¸ç™¼æ­¢æï¼Œä½†ç„¡æ³•ç¢ºå®šæ˜¯åœ¨é–‹ç›¤å³è§¸ç™¼é‚„æ˜¯æ”¶ç›¤å‰è§¸ç™¼ã€‚é«˜é »æ•¸æ“šèƒ½ç²¾ç¢ºé‚„åŸ **è§¸ç™¼æ™‚é–“é»** èˆ‡ **æ»‘åƒ¹å¹…åº¦**ã€‚
    * **å¾®çµæ§‹ç‰¹å¾µ:** è¨ˆç®—æ—¥å…§ **VPIN (Volume-Synchronized Probability of Informed Trading)** æˆ– **è²·è³£å£“å¤±è¡¡ (Order Flow Imbalance)**ï¼Œä½œç‚º L1 é˜²ç¦¦çš„æ–°å› å­ï¼Œæ•æ‰å¤§æˆ¶å‡ºè²¨è·¡è±¡ã€‚

### **2. Track B (å…¨çœŸæ³• - Reality Check)**
æ­¤éšæ®µå°‡ä½¿ç”¨ä»˜è²»çš„ **Point-in-Time (PIT)** è³‡æ–™åº« (å¦‚ Norgate Data, Sharadar, Polygon.io)ã€‚

* **æ ¸å¿ƒæŠ€è¡“: å‹•æ…‹è‚¡ç¥¨æ±  (Dynamic Universe Construction)**
    * **ç›®å‰å•é¡Œ:** V5.3 ä½¿ç”¨çš„æ˜¯ 2025 å¹´çš„ã€Œå€–å­˜è€…æ¸…å–®ã€ã€‚æˆ‘å€‘çŸ¥é“ NVDA ç¾åœ¨å¾ˆæˆåŠŸï¼Œæ‰€ä»¥åœ¨ 2016 å¹´è²·å®ƒã€‚
    * **è§£æ±ºæ–¹æ¡ˆ:** å»ºç«‹ `get_historical_universe(date)` å‡½æ•¸ã€‚
        * ä¾‹å¦‚ï¼šåœ¨ `2016-01-01` å›æ¸¬æ™‚ï¼Œç³»çµ±æŸ¥è©¢è³‡æ–™åº«ï¼šã€Œç•¶å¤© S&P 500 çš„æˆåˆ†è‚¡æ˜¯å“ªäº›ï¼Ÿã€
        * å›å‚³æ¸…å–®å°‡åŒ…å« **Sears (å·²ä¸‹å¸‚)**ã€**Lehman Brothers (å·²ä¸‹å¸‚)** ç­‰ç•¶å¹´çš„å¤§å‹è‚¡ï¼Œè€Œ**ä¸åŒ…å«**ç•¶æ™‚é‚„æœªä¸Šå¸‚æˆ–æœªå…¥é¸çš„è‚¡ç¥¨ã€‚
* **é©—è­‰ç›®æ¨™:**
    * **æ•æ‰ã€ŒæœªçŸ¥çš„åœ°é›·è‚¡ã€ (Unknown Unknowns):** æ‰¾å‡ºé‚£äº›æˆ‘å€‘æ²’è½éã€ä½†åœ¨æ­·å²ä¸Šæ›¾é€ æˆè™§æçš„è‚¡ç¥¨ã€‚
    * **çœŸå¯¦ç”Ÿå­˜ç‡:** åœ¨åŒ…å«æ•¸åƒæª”ã€Œå·²æ­»äº¡ã€è‚¡ç¥¨çš„çœŸå¯¦æ­·å²æ´ªæµä¸­ï¼Œé©—è­‰ V5.3 çš„é¢¨æ§é‚è¼¯æ˜¯å¦ä¾ç„¶æœ‰æ•ˆï¼Œæˆ–è€…ç¸¾æ•ˆæœƒå¤§å¹…ç¸®æ°´ (Alpha Decay)ã€‚